<h1><%= @group.name %></h1>

<h3>Transactions: (<%= @group.entities.count %>), Total Amount: <%= @total_amount %>:</h3>

<% if @group.icon.attached? %>
    <%= image_tag @group.icon, class: "group-icon" %>
<% else %>
    <%= image_tag 'default.png' %>
<% end %>
<ul>
    <% @group.entities.each do |entity| %>
        <li>
            <%= link_to entity.name, entity_path(entity) %> -
            <%= entity.amount %> -
            <%= entity.created_at.strftime('%Y-%m-%d %H:%M:%S') %>
        </li>
    <% end %>
</ul>
<h3>Total Amount: <%= @group.entities.sum(:amount) %></h3>
<div>
    <% if @group.user == current_user %>
        <%= link_to 'Add Entity', new_entity_path(group_id: @group.id) %>
        <%= link_to 'Edit Group', edit_group_path(@group) %> |
        <%= link_to 'Delete', group_path(@group), method: :delete, data: { confirm: 'Are you sure you want to delete this group?' } %>
    <% end %>
</div>

<%= link_to 'Back to All Groups', groups_path %>
